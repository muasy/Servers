/*
*********************************************************************************************************
* @file    	bsp_commu.h
* @author  	SY
* @version 	V1.0.0
* @date    	2017-10-24 19:54:57
* @IDE	 	Keil V5.22.0.0
* @Chip    	STM32F407VE
* @brief   	通讯头文件
*********************************************************************************************************
* @attention
*
* 
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                              				Define to prevent recursive inclusion
*********************************************************************************************************
*/
#ifndef __BSP_COMMU_H
#define __BSP_COMMU_H

/*
*********************************************************************************************************
*                              				Exported Includes
*********************************************************************************************************
*/


/*
*********************************************************************************************************
*                              				Exported define
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                              				Exported types
*********************************************************************************************************
*/
#pragma pack(1)

struct CmdVoidTx
{
	uint16_t cmd;
};

struct CmdVoidRx1
{
	uint16_t cmd;
};

struct CmdVoidTx1 {
	uint16_t cmd;
	uint8_t status;
};

struct CmdLogRx {
	uint16_t cmd;
	uint16_t passwd;
	uint8_t code;
	uint16_t dataPort;
};

struct CmdLogTx {
	uint16_t cmd;
	uint8_t status;
	uint8_t code;
};

struct CmdUpgradeRx {
	uint16_t cmd;
	uint16_t passwd;
	uint8_t code;
};

struct CmdUpgradeTx {
	uint16_t cmd;
	uint8_t status;
	uint8_t code;
};

struct CmdDeviceModelTx {
	uint16_t cmd;
	uint8_t status;
	char deviceModel[32];
	char hwModel[32];
	uint16_t firmwareVersion;
};


#pragma pack()




/*
*********************************************************************************************************
*                              				Exported constants
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*                              				Exported variables
*********************************************************************************************************
*/



/*
*********************************************************************************************************
*                              				Exported macro
*********************************************************************************************************
*/


/*
*********************************************************************************************************
*                              				Exported functions
*********************************************************************************************************
*/
bool ParseVoidCmd(const uint8_t *rxBody, uint16_t rxLength, \
		uint8_t *txBody, uint16_t *txLength);

void bsp_InitLog(void *para);
bool ParseLogCmd(const uint8_t *rxBody, uint16_t rxLength, \
		uint8_t *txBody, uint16_t *txLength);
	
void bsp_InitUpgrade(void *para);
bool ParseUpgradeCmd(const uint8_t *rxBody, uint16_t rxLength, \
		uint8_t *txBody, uint16_t *txLength);

bool ParseDeviceModelCmd(const uint8_t *rxBody, uint16_t rxLength, \
		uint8_t *txBody, uint16_t *txLength);

#endif
/************************ (C) COPYRIGHT STMicroelectronics **********END OF FILE*************************/
